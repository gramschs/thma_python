---
kernelspec:
  name: python3
  display_name: 'Python 3'
---

# 3.2 Plotly Express

Python kann auch auf schwachbrüstiger Hardware laufen wie beispielsweise auf
dem Raspberry Pi. Ein Grund für die Effizienz von Python ist, dass nicht alle
möglichen Datentypen, Funktionen und Methoden von Beginn an in den Speicher
geladen werden, sondern erst bei Bedarf. Python-Code ist in sogenannte Module
unterteilt.

In diesem Jupyter Notebook werden wir den Modul-Mechanismus anhand des
Plotly-Express-Moduls kennenlernen.

## Lernziele

TODO

## Import von Modulen

Module sind Python-Code, der Konstanten oder Anweisungen (Funktionen, Klassen)
zur Verfügung stellt, die den eigentlichen Python-Kern erweitern. Module müssen
importiert werden, damit der Python-Interpreter diese erweiterten
Funktionalitäten benutzen kann.

Es gibt mehrere Anweisungen, ein Modul zu importieren. Wir verwenden hier den
sogenannten **Alias-Import**. Ein Alias ist eine Abkürzung, in diesem Fall für
den Namen des Moduls. Theoretisch können wir jeden beliebigen Alias verwenden,
in der Praxis haben sich jedoch bestimmte Aliase eingebürgert. Im Fall von
Plotly Express ist `px` der Standard-Alias. Um also das Modul Plotly Express
mit dem alias `px` zu importieren, schreiben wir die folgende Code-Zeile:

```{code-cell} python
import plotly.express as px
```

Wird die obige Anweisung ausgeführt, passiert scheinbar nichts. Tatsächlich hat
der Python-Interpreter jedoch das Modul geladen. Die Anweisung `dir(px)` listet
auf, was genau alles importiert wurde.

```{code-cell} python
dir(px)
```

Die Liste der importierten Funktionalitäten ist ganz schön lang. Modulinhalte
mit einem Unterstrich `_` oder zwei Unterstrichen `__` ignorieren wir in dieser
Vorlesung. Wenn wir wissen möchten, was sich hinter den einzelnen
Funktionalitäten verbirgt, können wir die eingebaute Hilfe von Python aufrufen.
Dazu suchen wir uns einen Modulinhalt aus, über die wir mehr wissen wollen, und
rufen dann die Funktion `help()` auf. Wenn wir beispielsweise mehr über
`scatter` wissen wollen, lautet der Aufruf folgendermaßen:

```{code-cell} python
help(px.scatter)
```

```{admonition} Alias benutzen
:class: warning
Wenn wir eine Konstante, Funktion oder Klasse aus einem Modul benutzen wollen,
das wir mit einem Alias importiert haben, müssen wir immer den Alias
voranstellen und mit einem Punkt von der Funktionalität abtrennen.
```

Offensichtlich ist `px.scatter` eine Funktion ("function"), die einen
Scatterplot in 2D erstellt. Dabei ist Scatterplot die englische Bezeichnung für
Streudiagramm.

```{admonition} Mini-Übung
:class: tip
Rufen Sie die eingebaute Hilfe für die Funktion `line` auf und vergleichen Sie
die Ausgabe mit der Hilfe von `scatter`. Gibt es Gemeinsamkeiten in der Struktur
der Hilfebeschreibung?
```

```{code-cell} python
# Code-Zelle
help(px.line)
```

```{admonition} Lösung
:class: tip
:class: dropdown
Bei den Hilfebeschreibungen wird zuerst der Funktionsaufruf mit Argumenten
gezeigt, dann folgt eine kurze Beschreibung, was der Zweck der Funktion ist. Als
nächstes werden detailliert die Parameter der Funktion beschrieben und zuletzt
wird der Rückgabewert der Funktion angezeigt. Damit folgt die Hilfe dem
EVA-Prinzip. Die Hilfe beantowrtet die Fragen:

* Welche Eingaben sind möglich (Argumente und Parameter der Funktion)?
* Was gibt die Funktion nach der Verarbeitung als Ausgabe zurück?
```

## Scatterplots

Wir bleiben bei der `scatter()`-Funktion. Die Hilfe verrät uns, dass das erste
Argument der Funktion `data_frame` ist. Die Standardeinstellung lautet:
`data_frame=None`. `None` steht für einen fehlenden oder leeren Wert. Wir
brauchen also das erste Argument nicht notwendigerweise. Das zweite Argument ist
`x=None` und das dritte Argument `y=None`. Auch diese Argumente sind optional.
In der Beschreibung der Parameter steht, dass `x` und `y` Listen sein können.
Probieren wir es aus und definieren wir eine Liste mit x- und y-Koordinaten.

```{code-cell} python
# Erzeugung von Koordinaten
x_koordinaten = [0, 2, 2, 0]
y_koordinaten = [0, 0, 5, 5]

# Ausgabe als Scatterplot
px.scatter(x=x_koordinaten, y=y_koordinaten)
```

Je nachdem, welche Entwicklungsumgebung wir benutzen, wird der Scatterplot
angezeigt oder nicht. Wir können die Anzeige des Scatterplots erzwingen, indem
wir das Scatterplot-Objekt in einer Variable abspeichern und anschließend den
Plotly-Express-Befehl `.show()` benutzen.

```{code-cell} python
# Ausgabe als Scatterplot unabhängig von Entwicklungsumgebung
fig = px.scatter(x=x_koordinaten, y=y_koordinaten)
fig.show()
```

## Lineplots

Nachdem wir ja in der Hilfe schon den Befehl `line()` erkundet haben, wenden wir
ihn jetzt auch an.

```{code-cell} python
# Erzeugung von Koordinaten
x_koordinaten = [0, 2, 2, 0]
y_koordinaten = [0, 0, 5, 5]

# Ausgabe als Lineplot unabhängig von Entwicklungsumgebung
fig = px.line(x=x_koordinaten, y=y_koordinaten)
fig.show()
```

Die Punkte werden mit Linien verbunden. Um das Rechteck abzuschließen, fehlt
noch die Linie vom letzten Punkt zurück zum Ursprung (0,0). Wir erweitern die
Liste der Koordinaten mit der `.append()`-Methode und geben nun das vollständige
Rechteck aus.

```{code-cell} python
# Erweiterung der Koordinatenliste um Ursprung
x_koordinaten.append(0)
y_koordinaten.append(0)

# Ausgabe als Lineplot unabhängig von Entwicklungsumgebung
fig = px.line(x=x_koordinaten, y=y_koordinaten)
fig.show()
```
